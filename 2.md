# 友宝技术回忆录 - 降低故障率：不要把大厦建在沙滩上

2012年4月，我还没有入职友宝便接到第一项任务 -- 降低故障率。这真是一项笼统、感性、又棘手的工作，感觉老板挖了一个考验我的天坑。

## 问题和背景
### 背景  
当时友宝大约有5000台自贩机运营在4个大区13个城市的3000个网点，背后是十几个城市经理，几十个销售经理，几十个运维工程师，过百个仓储物流人员的线下团队。  
设备来源上，其中一半是自己发展起来的，一半是收购来的（非联网机型）。  
设备机型上，约1000台弹簧机，剩下的是富士冰山饮料机。约500台非触屏机型，剩下是触屏机型。  
设备软硬件上，都是Window系统，硬件有自己组装机和某台湾品牌的工控机。  
应用系统上，基于售货机主动周期联网的程序架构，所以云端几乎没有主动管理的能力，只能被动等待。  
### 问题  
问题交过来时，只有一句描述：分公司反馈售货机总是故障不能售卖！怨气冲天！  
故障记录朦朦胧胧，基本来自一线的感性反馈，不定量、不归类、不汇总，很抱怨、很焦虑，但不知道究竟影响程度有多大、什么是主要问题。  
故障现象千姿百态，黑屏、白屏、花屏、触屏点不动、断网、购买不出货、出货卡货、售空缺货，花样百出。  

## 处理过程
故障频发给公司上下带来深深的焦虑，而我自己还未入职，对公司情况两眼一抹黑，如何应对？  
### 量化故障记录：变感性为理性
- 统一故障记录格式，并不断改进。这样13个分公司上百名同事上报上来的故障才可理解、统一口径、可汇总。
- 记录要客观，用机器ID、报告时间、报告人、持续时间等客观信息记录，而非主观感受。
- 故障有分类，根据报告上来的故障，抽出其中典型的故障形成分类，如黑屏、白屏、断网等。
- 影响程度有定义，不能售卖、不能现金售卖、不能手机购买、广告不能播放等
- 周会对汇总的故障记录逐一过，记录不清晰的立即明确。
### 对症下药
针对汇总统计的问题逐一解决，并安排更新计划现场升级售货机软件（这时还没有网络升级能力）
- 软件Bug：有Bug是常态，关键要有重现、定位、解决、更新的快速修复bug机制
- 售货机每日定时重新启动：重启大法对任何有计算机的场景都是适用的
- 售货机保养规范：纸硬币器、触摸屏都是需要保养的器件，不定期保养故障率就会大幅提升
### 建立保障体系
建立机制让上面发现问题解决问题的能力制度化。
- 故障记录和处理机制
- 设备断网率报表和跟踪处理机制
- 设备维护保养机制
一顿操作之后，量化了故障，明确了故障原因，并解决了一些故障，故障率稳步下降，公司上下的焦虑情绪下降的更快，因为大家心里有底了。  

## 意义
这个为期差不多三个月、横跨入职前后的专项工作，意义重大。
1. 让我个人、研发团队、线下分公司都建立了一个明确的认识：系统实际运行效果的重要性，远胜于纸面的软件功能迭代。
2. 解决了研发团队在公司内的信任问题
3. 让公司突破了个小小的信心障碍 -- 互联网技术和售货机结合到底是加分还是减分？虽然这只是友宝创业中突破的重重信心障碍中较小的一个。
附带的，这个系统性工作，让我全面的熟悉了工作，快速进入角色。
